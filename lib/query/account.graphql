query CurrentUser {
  currentUser {
    ...userFields
  }
}

fragment userFields on User {
  name
  nickname
  picture
  customer {
    creditCard {
      brand
      lastFour
      expirationMonth
      expirationYear
    }
  }
  subscription {
    status
    periodEnd
  }
}

query RecentEvents($cursor: Cursor) {
  allEvents(last: 15, before: $cursor) @connection(key: "events") {
    nodes {
      ...eventFields
    }
    pageInfo {
      endCursor
      hasPreviousPage
    }
  }
}

fragment eventFields on Event {
  id
  eventType
  createdAt
  feed {
    id
    title
  }
  tweet {
    id
    body
  }
  boolValue
}

mutation CancelSubscription {
  cancelSubscription(input: {}) {
    user {
      subscription {
        status
      }
    }
  }
}

query GetSubscriptionStatus {
  currentUser {
    subscriptionStatusOverride
    subscription {
      status
    }
  }
}
